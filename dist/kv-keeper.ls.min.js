// KV-Keeper.js by andre487, see https://clck.ru/9cB92
!function(l,d){"use strict";function s(){e.dbVersion=1,e.dbName="kv-keeper-items",e.storeName="items",e.defaultType=c,e.namespace=p()}function p(){return e.dbName+":"+e.storeName+":"}function m(e){if(-1==[a,r,c].indexOf(e))throw new Error(i+"Invalid type "+e)}function v(e){switch(e){case c:return y();case r:return n(r,DB.create());case a:return n(a,t.create())}return null}function n(e,t){return{type:e,instance:t}}function y(){var e=o.db;return e?n(r,e):(e="undefined"!=typeof DB&&DB.create())?n(r,e):(e=o.ls,e?n(a,e):"undefined"!=typeof t?n(r,t.create()):void 0)}var e,h=["setItem","getItem","removeItem","getKeys","getLength","clear"],g=["dbName","storeName","defaultType"],r="db",a="ls",c="auto",i="[kv-keeper] ",u=Object.keys,o={};d?e=d:l.KvKeeper=e={},s(),e.configure=function(t){if(e.__configured)throw new Error(i+"Configuration can be set only once");e.__configured=!0,"defaultType"in t&&m(t.defaultType),u(t).forEach(function(n){if(!(g.indexOf(n)>-1))throw s(),new Error(i+n+" is not configurable");e[n]=t[n]}),e.namespace=p()},e.getStorage=function(t,n){"function"==typeof t&&(n=t,t=null),t=t||e.defaultType,m(t);var r=e._getInstance(t);if(r)r.init(n);else{var o=t==c?"No supported stores":'No "'+t+'" store support';n(new Error(i+o))}},e._getInstance=function(t){var e=o[t];if(!e){var n=v(t);e=o[n.type]=n.instance}return e},h.forEach(function(t){e[t]=function(){var n=arguments;e.getStorage(function(e,r){if(e){var o=n[n.length-1];return o(e)}r[t].apply(r,n)})}});var t=e.StorageLS=function(n){var e=this;e.init=function(t){t(null,e)},e.setItem=function(r,o,e){try{n.setItem(t.createKey(r),o),e(null)}catch(t){e(t)}},e.getItem=function(e,r){r(null,n.getItem(t.createKey(e)))},e.removeItem=function(e,r){n.removeItem(t.createKey(e)),r(null)},e.getKeys=function(e){var t=u(n).filter(f);e(null,t)},e.getLength=function(e){e(null,u(n).filter(f).length)},e.clear=function(e){u(n).filter(f).forEach(n.removeItem,n),e(null)},e.close=function(){o.ls=null}};t.createKey=function(t){return e.namespace+t};var f=t.isKeeperKey=function(t){return 0==t.indexOf(e.namespace)};t.create=function(){var e=l.localStorage;return e?new t(e):null}}(self,"undefined"!=typeof exports&&exports);
//# sourceMappingURL=kv-keeper.ls.map