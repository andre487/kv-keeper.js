{"version":3,"sources":["kv-keeper.js"],"names":["global","exports","noop","setDefaultConfiguration","KvKeeper","dbVersion","dbName","storeName","defaultType","TYPE_AUTO","namespace","createNamespace","validateType","type","TYPE_LS","TYPE_DB","indexOf","Error","ERR_PREFIX","wrapCallback","callback","cb","err","result","i","errorListeners","length","createInstance","createAutoInstance","formInstanceData","DB","create","LS","instance","instances","db","ls","openDb","indexedDb","req","open","onsuccess","onversionchange","close","onerror","event","onupgradeneeded","setupSchema","onblocked","wrapDbRequest","errMessage","error","message","wrapRequestCallback","target","LIB_METHODS","CONFIGURABLE_PROPS","TR_READ_WRITE","TR_READ_ONLY","getObjectKeys","Object","keys","preconnect","getStorage","addErrorListener","listener","push","removeErrorListener","index","splice","getErrorListeners","removeAllErrorListeners","configure","options","__configured","key","hasOwnProperty","finalType","finalCallback","_getInstance","errorMessage","data","init","forEach","method","args","arguments","storage","filter","arg","apply","StorageLS","that","this","setItem","value","createKey","e","getItem","hasItem","removeItem","getKeys","allKeys","nsLength","thatKeys","isKeeperKey","slice","getLength","clear","auto","base","localStorage","StorageDB","getTransactionStore","dbInstance","transaction","objectStore","put","String","get","res","Boolean","delete","setTimeout","bind","openCursor","cursor","continue","count","indexedDB","IDBKeyRange","objectStoreNames","contains","createObjectStore","keyPath","self"],"mappings":"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","file":"kv-keeper.min.js"}