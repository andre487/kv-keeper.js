{"version":3,"sources":["kv-keeper.js"],"names":["global","noop","setDefaultConfiguration","KvKeeper","dbVersion","dbName","storeName","defaultType","TYPE_AUTO","namespace","createNamespace","validateType","type","TYPE_LS","TYPE_DB","indexOf","Error","ERR_PREFIX","wrapCallback","callback","cb","err","result","i","errorListeners","length","createInstance","createAutoInstance","formInstanceData","DB","create","LS","instance","instances","db","ls","openDb","indexedDb","req","open","onsuccess","onversionchange","close","onerror","event","onupgradeneeded","setupSchema","onblocked","wrapDbRequest","errMessage","error","message","wrapRequestCallback","target","LIB_METHODS","CONFIGURABLE_PROPS","TR_READ_WRITE","TR_READ_ONLY","getObjectKeys","Object","keys","defineAsGlobal","exports","modules","define","require","provide","preconnect","getStorage","addErrorListener","listener","push","removeErrorListener","index","splice","getErrorListeners","removeAllErrorListeners","configure","options","__configured","key","hasOwnProperty","finalType","finalCallback","_getInstance","errorMessage","data","init","forEach","method","args","arguments","storage","filter","arg","apply","StorageLS","that","this","setItem","value","createKey","e","getItem","hasItem","removeItem","getKeys","allKeys","nsLength","thatKeys","isKeeperKey","slice","getLength","clear","auto","base","localStorage","StorageDB","getTransactionStore","dbInstance","transaction","objectStore","put","String","get","res","Boolean","delete","setTimeout","bind","openCursor","cursor","continue","count","indexedDB","IDBKeyRange","objectStoreNames","contains","createObjectStore","keyPath","self"],"mappings":"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","file":"kv-keeper.min.js"}