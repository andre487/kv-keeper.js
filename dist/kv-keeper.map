{"version":3,"sources":["kv-keeper.js"],"names":["global","exports","setDefaultConfiguration","KvKeeper","dbVersion","dbName","storeName","defaultType","TYPE_AUTO","namespace","createNamespace","validateType","type","TYPE_LS","TYPE_DB","indexOf","Error","ERR_PREFIX","wrapCallback","callback","err","result","i","errorListeners","length","createInstance","createAutoInstance","formInstanceData","DB","create","LS","instance","instances","db","ls","openDb","indexedDb","req","open","onsuccess","onversionchange","close","onerror","event","onupgradeneeded","setupSchema","onblocked","wrapDbRequest","errMessage","error","message","wrapRequestCallback","target","LIB_METHODS","CONFIGURABLE_PROPS","TR_READ_WRITE","TR_READ_ONLY","getObjectKeys","Object","keys","addErrorListener","listener","push","removeErrorListener","index","splice","getErrorListeners","removeAllErrorListeners","configure","options","__configured","forEach","key","getStorage","storage","_getInstance","init","data","method","args","arguments","apply","StorageLS","that","this","setItem","value","createKey","e","getItem","removeItem","getKeys","allKeys","nsLength","thatKeys","isKeeperKey","slice","getLength","filter","clear","base","localStorage","StorageDB","getTransactionStore","dbInstance","transaction","objectStore","put","String","get","res","delete","setTimeout","bind","openCursor","cursor","continue","count","indexedDB","IDBKeyRange","objectStoreNames","contains","createObjectStore","keyPath","self"],"mappings":"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","file":"kv-keeper.min.js"}